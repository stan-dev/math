<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Stan Math Library: stan::math::stack_alloc Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="standoxy.css" rel="stylesheet" type="text/css">
<!--  -->
<script type="text/javascript" src="eigen_navtree_hacks.js"></script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="stanlogo-main.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="https://mc-stan.org/math">Stan Math Library</a>
   &#160;<span id="projectnumber">5.0.0</span>
   </div>
   <div id="projectbrief">Automatic Differentiation</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('classstan_1_1math_1_1stack__alloc.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classstan_1_1math_1_1stack__alloc-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">stan::math::stack_alloc Class Reference</div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>An instance of this class provides a memory pool through which blocks of raw memory may be allocated and then collected simultaneously. </p>
<p>This class is useful in settings where large numbers of small objects are allocated and then collected all at once. This may include objects whose destructors have no effect.</p>
<p>Memory is allocated on a stack of blocks. Each block allocated is twice as large as the previous one. The memory may be recovered, with the blocks being reused, or all blocks may be freed, resetting the stack of blocks to its original state.</p>
<p>Alignment up to 8 byte boundaries guaranteed for the first malloc, and after that it's up to the caller. On 64-bit architectures, all struct values should be padded to 8-byte boundaries if they contain an 8-byte member or a virtual function. </p>

<p class="definition">Definition at line <a class="el" href="stack__alloc_8hpp_source.html#l00072">72</a> of file <a class="el" href="stack__alloc_8hpp_source.html">stack_alloc.hpp</a>.</p>
</div>
<p><code>#include &lt;<a class="el" href="stack__alloc_8hpp_source.html">stack_alloc.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6f3d990a5a10857cc2f159f5b0e6b287"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_a6f3d990a5a10857cc2f159f5b0e6b287.html#a6f3d990a5a10857cc2f159f5b0e6b287">stack_alloc</a> (size_t initial_nbytes=<a class="el" href="namespacestan_1_1math_1_1internal_a995bd1807ef2e59a9cf21cb5a9cb0d50.html#a995bd1807ef2e59a9cf21cb5a9cb0d50">internal::DEFAULT_INITIAL_NBYTES</a>)</td></tr>
<tr class="memdesc:a6f3d990a5a10857cc2f159f5b0e6b287"><td class="mdescLeft">&#160;</td><td class="mdescRight">Construct a resizable stack allocator initially holding the specified number of bytes.  <br /></td></tr>
<tr class="separator:a6f3d990a5a10857cc2f159f5b0e6b287"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a946367b4b88dd893103db604c5f23669"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_a946367b4b88dd893103db604c5f23669.html#a946367b4b88dd893103db604c5f23669">~stack_alloc</a> ()</td></tr>
<tr class="memdesc:a946367b4b88dd893103db604c5f23669"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy this memory allocator.  <br /></td></tr>
<tr class="separator:a946367b4b88dd893103db604c5f23669"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab723c4b30f5df1e740fdb8f72db3b076"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_ab723c4b30f5df1e740fdb8f72db3b076.html#ab723c4b30f5df1e740fdb8f72db3b076">alloc</a> (size_t len)</td></tr>
<tr class="memdesc:ab723c4b30f5df1e740fdb8f72db3b076"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return a newly allocated block of memory of the appropriate size managed by the stack allocator.  <br /></td></tr>
<tr class="separator:ab723c4b30f5df1e740fdb8f72db3b076"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53ca3063a824008e34b4289e4e5504c5"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:a53ca3063a824008e34b4289e4e5504c5"><td class="memTemplItemLeft" align="right" valign="top">T *&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_a53ca3063a824008e34b4289e4e5504c5.html#a53ca3063a824008e34b4289e4e5504c5">alloc_array</a> (size_t n)</td></tr>
<tr class="memdesc:a53ca3063a824008e34b4289e4e5504c5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate an array on the arena of the specified size to hold values of the specified template parameter type.  <br /></td></tr>
<tr class="separator:a53ca3063a824008e34b4289e4e5504c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af298b06ae054599532498a1ccff4caeb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_af298b06ae054599532498a1ccff4caeb.html#af298b06ae054599532498a1ccff4caeb">recover_all</a> ()</td></tr>
<tr class="memdesc:af298b06ae054599532498a1ccff4caeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recover all the memory used by the stack allocator.  <br /></td></tr>
<tr class="separator:af298b06ae054599532498a1ccff4caeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abdba5f8d013107c6a37f75e186bd6dfc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_abdba5f8d013107c6a37f75e186bd6dfc.html#abdba5f8d013107c6a37f75e186bd6dfc">start_nested</a> ()</td></tr>
<tr class="memdesc:abdba5f8d013107c6a37f75e186bd6dfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store current positions before doing nested operation so can recover back to start.  <br /></td></tr>
<tr class="separator:abdba5f8d013107c6a37f75e186bd6dfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e7184bae2a2082fa7f683723379af7b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_a9e7184bae2a2082fa7f683723379af7b.html#a9e7184bae2a2082fa7f683723379af7b">recover_nested</a> ()</td></tr>
<tr class="memdesc:a9e7184bae2a2082fa7f683723379af7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">recover memory back to the last start_nested call.  <br /></td></tr>
<tr class="separator:a9e7184bae2a2082fa7f683723379af7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af65518d98ebd980303efa6cc3af76073"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_af65518d98ebd980303efa6cc3af76073.html#af65518d98ebd980303efa6cc3af76073">free_all</a> ()</td></tr>
<tr class="memdesc:af65518d98ebd980303efa6cc3af76073"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free all memory used by the stack allocator other than the initial block allocation back to the system.  <br /></td></tr>
<tr class="separator:af65518d98ebd980303efa6cc3af76073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf087bab01e9a32f4381239838b382fb"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_adf087bab01e9a32f4381239838b382fb.html#adf087bab01e9a32f4381239838b382fb">bytes_allocated</a> () const</td></tr>
<tr class="memdesc:adf087bab01e9a32f4381239838b382fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return number of bytes allocated to this instance by the heap.  <br /></td></tr>
<tr class="separator:adf087bab01e9a32f4381239838b382fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c9ad0f5485d71c2f2bce2b0ba55602e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_a4c9ad0f5485d71c2f2bce2b0ba55602e.html#a4c9ad0f5485d71c2f2bce2b0ba55602e">in_stack</a> (const void *ptr) const</td></tr>
<tr class="memdesc:a4c9ad0f5485d71c2f2bce2b0ba55602e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether the memory in the pointer is in the stack.  <br /></td></tr>
<tr class="separator:a4c9ad0f5485d71c2f2bce2b0ba55602e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a14b559537482857070b49ba0424737de"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_a14b559537482857070b49ba0424737de.html#a14b559537482857070b49ba0424737de">move_to_next_block</a> (size_t len)</td></tr>
<tr class="memdesc:a14b559537482857070b49ba0424737de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Moves us to the next block of memory, allocating that block if necessary, and allocates len bytes of memory within that block.  <br /></td></tr>
<tr class="separator:a14b559537482857070b49ba0424737de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a6f1153f632324b42dad75786c8966f29"><td class="memItemLeft" align="right" valign="top">std::vector&lt; char * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_a6f1153f632324b42dad75786c8966f29.html#a6f1153f632324b42dad75786c8966f29">blocks_</a></td></tr>
<tr class="separator:a6f1153f632324b42dad75786c8966f29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b96ae617cbf19a35400b134586308a1"><td class="memItemLeft" align="right" valign="top">std::vector&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_a8b96ae617cbf19a35400b134586308a1.html#a8b96ae617cbf19a35400b134586308a1">sizes_</a></td></tr>
<tr class="separator:a8b96ae617cbf19a35400b134586308a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72b59a2c859a3938c4890ca0941fc206"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_a72b59a2c859a3938c4890ca0941fc206.html#a72b59a2c859a3938c4890ca0941fc206">cur_block_</a></td></tr>
<tr class="separator:a72b59a2c859a3938c4890ca0941fc206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad781fdc436d05f72683ff27cee3262e6"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_ad781fdc436d05f72683ff27cee3262e6.html#ad781fdc436d05f72683ff27cee3262e6">cur_block_end_</a></td></tr>
<tr class="separator:ad781fdc436d05f72683ff27cee3262e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b9601b7f0d54a1ad2aa1a88ea298845"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_a4b9601b7f0d54a1ad2aa1a88ea298845.html#a4b9601b7f0d54a1ad2aa1a88ea298845">next_loc_</a></td></tr>
<tr class="separator:a4b9601b7f0d54a1ad2aa1a88ea298845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab55dd6a3f8802db59f5b753694d1ac04"><td class="memItemLeft" align="right" valign="top">std::vector&lt; size_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_ab55dd6a3f8802db59f5b753694d1ac04.html#ab55dd6a3f8802db59f5b753694d1ac04">nested_cur_blocks_</a></td></tr>
<tr class="separator:ab55dd6a3f8802db59f5b753694d1ac04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee67fb359fc3193c355068a1fcbb9efd"><td class="memItemLeft" align="right" valign="top">std::vector&lt; char * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_aee67fb359fc3193c355068a1fcbb9efd.html#aee67fb359fc3193c355068a1fcbb9efd">nested_next_locs_</a></td></tr>
<tr class="separator:aee67fb359fc3193c355068a1fcbb9efd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b777d06bb8201665cd18c0d72d0ae4a"><td class="memItemLeft" align="right" valign="top">std::vector&lt; char * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classstan_1_1math_1_1stack__alloc_a9b777d06bb8201665cd18c0d72d0ae4a.html#a9b777d06bb8201665cd18c0d72d0ae4a">nested_cur_block_ends_</a></td></tr>
<tr class="separator:a9b777d06bb8201665cd18c0d72d0ae4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>stan/math/memory/<a class="el" href="stack__alloc_8hpp_source.html">stack_alloc.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->

<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacestan.html">stan</a></li><li class="navelem"><a class="el" href="namespacestan_1_1math.html">math</a></li><li class="navelem"><a class="el" href="classstan_1_1math_1_1stack__alloc.html">stack_alloc</a></li>
    <li class="footer">
    <div class="contents" style="font-size:100%;">
      <span style="float:left; margin=0 1em 0 1em;">
      &nbsp;&nbsp;&nbsp;&nbsp;
      [ <a href="http://mc-stan.org/">Stan Home Page</a> ]
      </span>
      <span style="float:right; margin=0 1em 0 1em;">
      <i>&copy; 2011&ndash;2019,
      Stan Development Team.
      &nbsp;&nbsp;&nbsp;&nbsp;
      </i>
      </span>
    </div> </li>
  </ul>
</div>
</body>
</html>
