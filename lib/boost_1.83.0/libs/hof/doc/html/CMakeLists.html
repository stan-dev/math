
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Generated by boostdep --cmake hof &#8212; Boost.HigherOrderFunctions 0.6 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/boostbook.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86"src="_static/boost.png"></td>
</tr></table>

<div class="spirit-nav">
<a accesskey="p"  ><img src="_static/prev.png" alt="Prev"></a>
<a accesskey="u" href="doc/index.html"><img src="_static/up.png" alt="Up"></a>
<a accesskey="h" href="doc/index.html"><img src="_static/home.png" alt="Home"></a>
<a accesskey="n"  ><img src="_static/next.png" alt="Next"></a>
</div>
  

    <div class="document">
  <div class="chapter">
      <div class="body" role="main">
        
  <p>if(NOT CMAKE_SOURCE_DIR STREQUAL CMAKE_CURRENT_SOURCE_DIR)</p>
<div class="section" id="generated-by-boostdep-cmake-hof">
<h1>Generated by <code class="docutils literal notranslate"><span class="pre">boostdep</span> <span class="pre">--cmake</span> <span class="pre">hof</span></code><a class="headerlink" href="#generated-by-boostdep-cmake-hof" title="Permalink to this heading">¶</a></h1>
</div>
<div class="section" id="copyright-2020-2021-peter-dimov">
<h1>Copyright 2020, 2021 Peter Dimov<a class="headerlink" href="#copyright-2020-2021-peter-dimov" title="Permalink to this heading">¶</a></h1>
</div>
<div class="section" id="distributed-under-the-boost-software-license-version-1-0">
<h1>Distributed under the Boost Software License, Version 1.0.<a class="headerlink" href="#distributed-under-the-boost-software-license-version-1-0" title="Permalink to this heading">¶</a></h1>
</div>
<div class="section" id="https-www-boost-org-license-1-0-txt">
<h1>https://www.boost.org/LICENSE_1_0.txt<a class="headerlink" href="#https-www-boost-org-license-1-0-txt" title="Permalink to this heading">¶</a></h1>
<p>cmake_minimum_required(VERSION 3.8…3.20)</p>
<p>project(boost_hof VERSION “${BOOST_SUPERPROJECT_VERSION}” LANGUAGES CXX)</p>
<p>add_library(boost_hof INTERFACE)
add_library(Boost::hof ALIAS boost_hof)</p>
<p>target_include_directories(boost_hof INTERFACE include)</p>
<p>target_compile_features(boost_hof INTERFACE cxx_std_11)</p>
<p>else()</p>
<p>#=============================================================================</p>
</div>
<div class="section" id="copyright-c-2017-paul-fultz-ii">
<h1>Copyright (c) 2017 Paul Fultz II<a class="headerlink" href="#copyright-c-2017-paul-fultz-ii" title="Permalink to this heading">¶</a></h1>
</div>
<div class="section" id="cmakelists-txt">
<h1>CMakeLists.txt<a class="headerlink" href="#cmakelists-txt" title="Permalink to this heading">¶</a></h1>
</div>
<div class="section" id="distributed-under-the-boost-software-license-version-1-0-see-accompanying">
<h1>Distributed under the Boost Software License, Version 1.0. (See accompanying<a class="headerlink" href="#distributed-under-the-boost-software-license-version-1-0-see-accompanying" title="Permalink to this heading">¶</a></h1>
</div>
<div class="section" id="file-license-1-0-txt-or-copy-at-http-www-boost-org-license-1-0-txt">
<h1>file LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)<a class="headerlink" href="#file-license-1-0-txt-or-copy-at-http-www-boost-org-license-1-0-txt" title="Permalink to this heading">¶</a></h1>
<p>#==============================================================================
cmake_minimum_required (VERSION 2.8)
project (boost_hof)
list(APPEND CMAKE_MODULE_PATH “${CMAKE_CURRENT_SOURCE_DIR}/cmake”)</p>
<p>foreach(level MAJOR MINOR PATCH)
file(STRINGS include/boost/hof/version.hpp
<em>define</em>${level}
REGEX “#define BOOST_HOF_${level}<em>VERSION”)
string(REGEX MATCH “([0-9]+)” boost_hof_VERSION</em>${level} “${<em>define</em>${level}}”)
endforeach()</p>
<p>include(CheckCXXCompilerFlag)
enable_language(CXX)</p>
<p>if(NOT CMAKE_CXX_FLAGS MATCHES “-std=”)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if(CMAKE_HOST_APPLE)
  check_cxx_compiler_flag(&quot;-stdlib=libc++&quot; COMPILER_HAS_CXX_FLAG_libcxx)
  if(COMPILER_HAS_CXX_FLAG_libcxx)
    set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} -stdlib=libc++&quot;)
  endif()
endif()

set(ENABLE_CXXFLAGS_TO_CHECK 
    -std=gnu++17
    -std=c++17
    -std=gnu++1z
    -std=c++1z
    -std=gnu++14
    -std=c++14
    -std=gnu++1y 
    -std=c++1y
    -std=gnu++11 
    -std=c++11
    -std=gnu++0x 
    -std=c++0x)

foreach(flag ${ENABLE_CXXFLAGS_TO_CHECK})
    string(REPLACE &quot;-std=&quot; &quot;_&quot; flag_var ${flag})
    string(REPLACE &quot;+&quot; &quot;x&quot; flag_var ${flag_var})
    check_cxx_compiler_flag(&quot;${flag}&quot; COMPILER_HAS_CXX_FLAG${flag_var})
    if(COMPILER_HAS_CXX_FLAG${flag_var})
        set(CMAKE_CXX_FLAGS &quot;${CMAKE_CXX_FLAGS} ${flag}&quot;)
        break()
    endif()
endforeach()
</pre></div>
</div>
<p>endif()</p>
<p>install (DIRECTORY include/boost DESTINATION include)
configure_file(boost_hof.pc.in boost_hof.pc)
install(FILES ${CMAKE_CURRENT_BINARY_DIR}/boost_hof.pc DESTINATION lib/pkgconfig)</p>
<p>include(SphinxDoc)</p>
<p>add_sphinx_doc(${CMAKE_CURRENT_SOURCE_DIR}/doc HTML_DIR ${CMAKE_CURRENT_SOURCE_DIR}/doc/html)</p>
<p>include(BCMTest)</p>
<p>include_directories(include)</p>
<p>file(GLOB TESTS test/*.cpp)
foreach(TEST ${TESTS})
get_filename_component(BASE_NAME ${TEST} NAME_WE)
bcm_add_test(NAME ${BASE_NAME} SOURCES ${TEST})
set_tests_properties(${BASE_NAME} PROPERTIES FAIL_REGULAR_EXPRESSION “FAILED”)
endforeach()
bcm_add_test(NAME static_def SOURCES test/static_def/static_def.cpp test/static_def/static_def2.cpp)
set_tests_properties(static_def PROPERTIES FAIL_REGULAR_EXPRESSION “FAILED”)</p>
<p>file(GLOB FAIL_TESTS test/fail/*.cpp)
foreach(TEST ${FAIL_TESTS})
get_filename_component(BASE_NAME ${TEST} NAME_WE)
bcm_add_test(NAME fail-${BASE_NAME} COMPILE_ONLY WILL_FAIL SOURCES ${TEST})
endforeach()</p>
<p>file(GLOB HEADERS include/boost/hof/*.hpp)
foreach(HEADER ${HEADERS})
get_filename_component(BASE_NAME ${HEADER} NAME_WE)
bcm_test_header(NAME ${BASE_NAME} HEADER boost/hof/${BASE_NAME}.hpp STATIC)
endforeach()
bcm_test_header(NAME hof HEADER boost/hof.hpp STATIC)</p>
<p>function(extract_doc SOURCE OUTPUTVAR)
file(READ ${SOURCE} CONTENT)
string(REGEX REPLACE “(\n(/[^/][^/]|//[^/]|[^/][^/][^/])([^\n])*)” “” CONTENT “\n${CONTENT}”)
string(REPLACE “/// ” “” CONTENT “${CONTENT}”)
set(${OUTPUTVAR} “${CONTENT}” PARENT_SCOPE)
endfunction()</p>
<p>function(build_example SECTIONCONTENT NAME)
string(MD5 MD5_SECTION “${SECTIONCONTENT}”)
set(TARGET_NAME “example-${NAME}-${MD5_SECTION}”)
set(CONTENT “”)
foreach(LINE ${SECTIONCONTENT})
if(LINE MATCHES “^    “)
string(SUBSTRING ${LINE} “4” “-1” OUTPUT_LINE)
list(APPEND CONTENT ${OUTPUT_LINE})
endif()
endforeach()
string(REPLACE “;” “\n” CONTENT “${CONTENT}”)
string(REPLACE “$$<strong>semicolon</strong>$$” “;” CONTENT “${CONTENT}”)
if(NOT CONTENT MATCHES “int main”)
string(APPEND CONTENT “int main() {}”)
endif()
message(STATUS “Adding example: ${TARGET_NAME}”)
bcm_add_test(NAME ${TARGET_NAME} CONTENT “${CONTENT}\n”)
endfunction()</p>
<p>function(extract_example SOURCE)
extract_doc(${SOURCE} CONTENT)
string(REPLACE “;” “$$<strong>semicolon</strong>$$” CONTENT “${CONTENT}”)
string(REPLACE “\n” “;” CONTENT “${CONTENT}”)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>get_filename_component(BASE_NAME ${SOURCE} NAME_WE)

set(SECTION &quot;&quot;)
set(PREVLINE &quot;&quot;)
set(APPEND_SECTION Off)
foreach(LINE ${CONTENT})
    if(APPEND_SECTION)
        if((LINE MATCHES &quot;^---&quot;) OR (LINE MATCHES &quot;^===&quot;))
            build_example(&quot;${SECTION}&quot; ${BASE_NAME})
            set(APPEND_SECTION Off)
            set(SECTION &quot;&quot;)
        elseif(NOT PREVLINE MATCHES &quot;^---&quot;)
            list(APPEND SECTION ${PREVLINE})
        endif()
    else()
        if((LINE MATCHES &quot;^---&quot;) AND (PREVLINE MATCHES &quot;^Example&quot;))
            set(APPEND_SECTION One)
        endif()
    endif()
    set(PREVLINE &quot;${LINE}&quot;)
endforeach()
list(APPEND SECTION ${PREVLINE})
if(APPEND_SECTION)
    build_example(&quot;${SECTION}&quot; ${BASE_NAME})
endif()
</pre></div>
</div>
<p>endfunction()</p>
<p>set(BUILD_EXAMPLES off CACHE BOOL “Set this to build the examples”)</p>
<p>if (BUILD_EXAMPLES)
file(GLOB EXAMPLES example/*.cpp)
foreach(EXAMPLE ${EXAMPLES})
get_filename_component(BASE_NAME ${EXAMPLE} NAME_WE)
bcm_add_test(NAME example-${BASE_NAME} SOURCES ${EXAMPLE})
endforeach()
foreach(HEADER ${HEADERS})
extract_example(${HEADER})
endforeach()
endif()</p>
<p>endif()</p>
</div>


      </div>
  </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
    <table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
    <td align="left"></td>
    <td align="right"><div class="copyright-footer">
            &#169; Copyright 2016, Paul Fultz II.
        
          Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.2.1.
          <p>Distributed under the Boost Software License, Version 1.0.
          (See accompanying file <code class="filename">LICENSE_1_0.txt</code> or copy at 
          <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
          </p>
    </div></td>
    </tr></table>
    </div>
  </body>
</html>